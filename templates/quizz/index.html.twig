<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste des Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex bg-gray-100">
    <aside class="w-64 bg-lime-500 text-white p-5 min-h-screen">
        <div class="text-lg font-bold mb-5">Alpha Education</div>
        <ul class="space-y-4">
            <li><a href="#" class="block hover:text-gray-200">üë§ Profil</a></li>
            <li><a href="#" class="block hover:text-gray-200">üìö Cours</a></li>
            <li><a href="#" class="block hover:text-gray-200">üìä Chapitres</a></li>
            <li><a href="{{ path('quizz_index') }}" class="block hover:text-gray-200">üìù Quiz</a></li>
            <li><a href="#" class="block hover:text-gray-200">üîí D√©connexion</a></li>
        </ul>
        <hr class="my-4 border-white">
        <a href="{{ path('switch_role', {'role': 'admin'}) }}" class="block bg-blue-500 text-white px-4 py-2 my-2 rounded-lg text-center">Admin</a>
        <a href="{{ path('switch_role', {'role': 'eleve'}) }}" class="block bg-red-500 text-white px-4 py-2 my-2 rounded-lg text-center">√âl√®ve</a>
    </aside>

    <main class="flex-1 p-6">
        <h1 class="text-2xl font-bold">Liste des Quiz</h1>

        {% if role == 'admin' %}
            <a href="{{ path('quizz_new') }}" class="bg-blue-500 text-white px-4 py-2 rounded-lg mt-4 inline-block">Cr√©er un Nouveau Quiz</a>
        {% endif %}

        <div class="mt-8">
            {% for quiz in quizzs %}
                <div class="bg-white p-4 shadow-lg rounded-lg mb-4 flex justify-between items-center">
                    <div>
                        <h2 class="text-xl font-bold">{{ quiz.matiere }}</h2>
                        <p>Chapitre : {{ quiz.chapitre }}</p>
                        <p>Difficult√© : {{ quiz.difficulte }}</p>
                        <a href="{{ path('quizz_show', {'id': quiz.id}) }}" class="text-blue-500">Voir les questions</a>
                    </div>
                    <div>
                        {% if role == 'admin' %}
                            <a href="{{ path('quizz_edit', {'id': quiz.id}) }}" class="bg-yellow-500 text-white px-4 py-2 rounded-lg mr-2">Modifier</a>
                            <form action="{{ path('quizz_delete', {'id': quiz.id}) }}" method="POST" style="display:inline;">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ quiz.id) }}">
                                <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded-lg">Supprimer</button>
                            </form>
                        {% elseif role == 'eleve' %}
                            {% if quiz.etat == 1 %}
                                <a href="{{ path('quizz_start', {'id': quiz.id}) }}" class="bg-green-500 text-white px-4 py-2 rounded-lg">D√©buter</a>
                            {% else %}
                                <span class="bg-gray-500 text-white px-4 py-2 rounded-lg">Termin√©</span>
                            {% endif %}
                        {% endif %}
                        {% if role == 'eleve' %}
                            <a href="{{ path('quizz_questions', {'id': quiz.id}) }}" class="bg-green-500 text-white px-4 py-2 rounded-lg">
                                D√©buter
                            </a>
                        {% endif %}
                    </div>
                </div>
            {% else %}
                <p class="text-gray-500">Aucun quiz disponible.</p>
            {% endfor %}
        </div>
    </main>
</body>
</html>
