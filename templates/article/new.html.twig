{% extends 'base.html.twig' %}

{% form_theme form '@FOSCKEditor/Form/ckeditor_widget.html.twig' %}

{% block title %}Nouvel Article{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1>✍️ Créer un nouvel article</h1>

    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label == 'error' ? 'danger' : label }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}

    {{ form_start(form, {
        'attr': {
            'class': 'needs-validation',
            'novalidate': 'novalidate',
            'id': 'article-form'
        }
    }) }}
        <div class="mb-3">
            {{ form_label(form.title) }}
            {{ form_widget(form.title) }}
            <div class="text-danger">
                {{ form_errors(form.title) }}
            </div>
        </div>

        <div class="mb-3">
            {{ form_label(form.content) }}
            {{ form_widget(form.content) }}
            <div class="text-danger">
                {{ form_errors(form.content) }}
            </div>
        </div>

        <div class="mb-3">
            {{ form_label(form.category) }}
            {{ form_widget(form.category) }}
            <div class="text-danger">
                {{ form_errors(form.category) }}
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4">
            <a href="{{ path('articles_index') }}" class="btn btn-secondary">Annuler</a>
            <button type="submit" class="btn btn-primary" id="submit-button">Publier l'article</button>
        </div>
    {{ form_end(form) }}
</div>

{% block javascripts %}
<script>
document.getElementById('article-form').addEventListener('submit', function(e) {
    console.log('Form submitted');
});
</script>
{% endblock %}
{% endblock %}
